var F=Object.defineProperty;var u=(r,o)=>F(r,"name",{value:o,configurable:!0});import g,{Router as c}from"express";import{Book as m,Magazine as y}from"gede-book-api";function s(r,o,t,e){o&&!t?t="\u64CD\u4F5C\u6210\u529F":!o&&!t&&(t="\u64CD\u4F5C\u5931\u8D25"),r.send({success:o,message:t,data:e})}u(s,"sendRes");const d=u((r,o)=>{o instanceof Error&&s(r,!1,o.message)},"errorHandler"),h=u((r,o)=>{Object.getOwnPropertyNames(o).filter(t=>typeof o[t]=="function").forEach(t=>{const e=u(async(...a)=>o[t](...a),"method");r.get(`/${t}`,(a,f)=>{try{const C=JSON.parse(a.query.args);e(...C).then(i=>{s(f,!0,null,i)}).catch(i=>d(f,i))}catch{d(f,new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684 args \u53C2\u6570"))}})})},"handlerApi"),l=c();h(l,m);const p=c();h(p,y);const n=c();n.use(g.json()),n.use("/book",l),n.use("/magazine",p);export{n as default};
//# sourceMappingURL=index.mjs.map
